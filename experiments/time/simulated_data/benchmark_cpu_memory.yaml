seml:
    executable: experiments/time/benchmark.py  # relative path to the script that contains the experiment
    project_root_dir: ../../..
    conda_environment: moscot_benchmarking_time
    name: tedsim_cpu_memory
    output_dir: experiments/time/simulated_data/logs/tedsim_cpu_memory # this directory must exist already

slurm:
    #experiments_per_job: 1
    #max_simultaneous_jobs: 20
    sbatch_options_template: CPU
    sbatch_options:
      #exclude: ibis216-010-0[35,37,64], icb-rsrv0[6,8], ibis-ceph-0[02-05,08-16], ibis-ceph-0[17-19]
      constraint: xeon_6126|opteron_6234|opteron_6376|opteron_6378
      partition: cpu_p

fixed:
    benchmark_mode: cpu_memory
    validate_ot: true
    epsilon: 5e-1
    lambda_1: 2
    lambda_2: 10
    threshold: 1e-6
    max_iterations: 1e6
    local_pca: 30
    seed: 1234
    key: node_depth
    n_val_samples: 50


grid:
    run:
        type: range
        min: 0
        max: 5
        step: 1
    dirs:
        type: choice
        options:
        -   [/home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/1024_adata.h5ad, /home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/1024_true_coupling.h5ad]
        -   [/home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/2048_adata.h5ad, /home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/2048_true_coupling.h5ad]
        -   [/home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/4096_adata.h5ad, /home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/4096_true_coupling.h5ad]
        -   [/home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/8192_adata.h5ad, /home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/8192_true_coupling.h5ad]
        -   [/home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/16384_adata.h5ad, /home/icb/dominik.klein/data/adatas_tedsim_benchmark/adatas/16384_true_coupling.h5ad]
WOT:
    fixed:
        model: WOT

moscot:
    fixed:
        model: moscot
        rank: None
        gamma: None
    grid:
        online:
            type: choice
            options:
            -   false
            -   1024

moscot_lr:
    fixed:
        model: moscot
    grid:
        online:
            type: choice
            options:
            -   false
            -   1024
        rank:
            type: choice
            options:
            -   5
            -   10
            -   50
            -   200
            -   1000
        gamma:
            type: choice
            options:
            -   0.01
            -   0.1
            -   1
            -   10
            -   100
